import{a as T}from"./chunk-M5CVDSU7.js";import{a as y,b as E,c as p,d as M,e as P,i as O,j as k,k as w,l as L,m as R,n as I,o as F,q as N}from"./chunk-KETG777E.js";import{d as C,e as h,h as S}from"./chunk-HFLO2JPX.js";import"./chunk-NZP4ZDRF.js";import{Ba as c,Ga as f,Jb as b,Ka as m,Nb as _,Ra as s,Ua as e,Va as t,Wa as g,Ya as v,Za as d,cb as o,eb as x,xa as l}from"./chunk-MZDTUXRP.js";function A(i,n){i&1&&(e(0,"div"),o(1,"Email is required"),t())}function B(i,n){i&1&&(e(0,"div"),o(1,"Please enter a valid email"),t())}function D(i,n){if(i&1&&(e(0,"div",29),m(1,A,2,0,"div",30)(2,B,2,0,"div",30),t()),i&2){let r=d();l(),s("ngIf",r.f.email.errors.required),l(),s("ngIf",r.f.email.errors.email)}}function G(i,n){i&1&&(e(0,"div"),o(1,"Password is required"),t())}function V(i,n){if(i&1&&(e(0,"div",29),m(1,G,2,0,"div",30),t()),i&2){let r=d();l(),s("ngIf",r.f.password.errors.required)}}function z(i,n){i&1&&(e(0,"div"),o(1,"Role selection is required"),t())}function J(i,n){if(i&1&&(e(0,"div",29),m(1,z,2,0,"div",30),t()),i&2){let r=d();l(),s("ngIf",r.f.userRole.errors.required)}}function H(i,n){if(i&1&&(e(0,"div",29),o(1),t()),i&2){let r=d();l(),x(" ",r.loginError," ")}}var q=class i{constructor(n,r,a){this.formBuilder=n;this.router=r;this.authService=a;this.loginForm=this.formBuilder.group({email:["",[p.required,p.email]],password:["",[p.required]],userRole:["",[p.required]],remember:[!1]})}loginForm;submitted=!1;loginError="";isLoading=!1;get f(){return this.loginForm.controls}onSubmit(){if(this.submitted=!0,this.loginError="",console.log("Form submitted:",this.loginForm.value),this.loginForm.invalid){console.log("Form is invalid");return}let n=this.loginForm.value,r=this.authService.getRoleIdByName(n.userRole);console.log("Role ID retrieved for user role:",n.userRole,"Role ID:",r),this.isLoading=!0,this.authService.login(n.email,n.password,n.userRole).subscribe({next:a=>{let u=a.body?.user;if(!u||!u.id){console.error("Login response missing user information",a),this.loginError="Invalid login response. Please try again.",this.isLoading=!1;return}console.log("Login successful \u2728",u),this.navigateBasedOnRole(n.userRole),this.isLoading=!1},error:a=>{console.error("Login failed:",a),this.loginError="Login failed. Please check your credentials and try again.",this.isLoading=!1}})}navigateBasedOnRole(n){switch(n){case"admin":this.router.navigate(["/administrators"]);break;case"jobseeker":this.router.navigate(["/job-seekers"]);break;case"employer":this.router.navigate(["/employers"]);break;default:this.router.navigate(["/"]);break}}static \u0275fac=function(r){return new(r||i)(c(F),c(C),c(T))};static \u0275cmp=f({type:i,selectors:[["app-login"]],decls:53,vars:5,consts:[[1,"login-container"],[1,"auth-card"],[1,"social-login"],[1,"social-btn","google-btn"],[1,"google-text"],[1,"social-btn","apple-btn"],[1,"apple-text"],[1,"separator"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],["type","email","id","email","formControlName","email","placeholder","Enter your email",1,"form-control"],["class","error-message",4,"ngIf"],["for","password"],["type","password","id","password","formControlName","password","placeholder","Enter your password",1,"form-control"],["for","userRole"],["id","userRole","formControlName","userRole",1,"form-control"],["value",""],["value","admin"],["value","jobseeker"],["value","employer"],[1,"form-options"],[1,"remember-me"],["type","checkbox","id","remember","formControlName","remember"],["for","remember"],["routerLink","/forgot-password",1,"forgot-link"],["type","submit",1,"sign-in-btn"],[1,"register-link"],["routerLink","/create-account"],[1,"error-message"],[4,"ngIf"]],template:function(r,a){r&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),o(4," Sign in with "),e(5,"span",4),o(6,"Google"),t()(),e(7,"button",5),o(8," Sign in with "),e(9,"span",6),o(10,"Apple"),t()()(),e(11,"div",7)(12,"span"),o(13,"Log into your account"),t()(),e(14,"form",8),v("ngSubmit",function(){return a.onSubmit()}),e(15,"div",9)(16,"label",10),o(17,"Email"),t(),g(18,"input",11),m(19,D,3,2,"div",12),t(),e(20,"div",9)(21,"label",13),o(22,"Password"),t(),g(23,"input",14),m(24,V,2,1,"div",12),t(),e(25,"div",9)(26,"label",15),o(27,"Login as"),t(),e(28,"select",16)(29,"option",17),o(30,"Select your role"),t(),e(31,"option",18),o(32,"Admin"),t(),e(33,"option",19),o(34,"Job Seeker"),t(),e(35,"option",20),o(36,"Employer"),t()(),m(37,J,2,1,"div",12),t(),e(38,"div",21)(39,"div",22),g(40,"input",23),e(41,"label",24),o(42,"Remember me"),t()(),e(43,"a",25),o(44,"Forgot password?"),t()(),m(45,H,2,1,"div",12),e(46,"button",26),o(47,"Sign In"),t()(),e(48,"div",27)(49,"span"),o(50,"Don't have an account?"),t(),e(51,"a",28),o(52,"Create account"),t()()()()),r&2&&(l(14),s("formGroup",a.loginForm),l(5),s("ngIf",a.submitted&&a.f.email.errors),l(5),s("ngIf",a.submitted&&a.f.password.errors),l(13),s("ngIf",a.submitted&&a.f.userRole.errors),l(8),s("ngIf",a.loginError))},dependencies:[_,b,N,O,R,I,E,y,L,M,P,k,w,S,h],styles:['.login-container[_ngcontent-%COMP%]{max-width:400px;margin:40px auto;padding:0 20px}.auth-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 2px 10px #0000001a;padding:30px}.social-login[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;margin-bottom:20px}.social-btn[_ngcontent-%COMP%]{padding:12px;border:1px solid #ddd;border-radius:4px;background:#fff;cursor:pointer;font-weight:500;display:flex;align-items:center;justify-content:center;transition:background-color .2s}.social-btn[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.google-text[_ngcontent-%COMP%], .apple-text[_ngcontent-%COMP%]{font-weight:700;margin-left:5px}.separator[_ngcontent-%COMP%]{text-align:center;margin:20px 0;position:relative}.separator[_ngcontent-%COMP%]:before, .separator[_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%;width:100px;height:1px;background-color:#ddd}.separator[_ngcontent-%COMP%]:before{left:0}.separator[_ngcontent-%COMP%]:after{right:0}.separator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:#fff;padding:0 10px;color:#777;position:relative;z-index:1}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:500;color:#333}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;font-size:14px}.form-options[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin:15px 0}.remember-me[_ngcontent-%COMP%]{display:flex;align-items:center}.remember-me[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:5px}.forgot-link[_ngcontent-%COMP%]{color:#e75480;text-decoration:none;font-size:14px}.sign-in-btn[_ngcontent-%COMP%]{width:100%;padding:12px;background-color:#e75480;color:#fff;border:none;border-radius:4px;font-weight:500;cursor:pointer;transition:background-color .3s}.sign-in-btn[_ngcontent-%COMP%]:hover{background-color:#d23e6d}.register-link[_ngcontent-%COMP%]{text-align:center;margin-top:20px;font-size:14px}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#e75480;text-decoration:none;margin-left:5px;font-weight:500}.error-message[_ngcontent-%COMP%]{color:#dc3545;font-size:12px;margin-top:5px}']})};export{q as LoginComponent};
