import{a as oe}from"./chunk-AO5FASYK.js";import{a as R,b as G,d as H,e as Y,f as q,g as K,h as Q,i as X,j as Z,k as ee,p as te,q as ie}from"./chunk-KETG777E.js";import{e as B,h as z}from"./chunk-HFLO2JPX.js";import{c as V}from"./chunk-NZP4ZDRF.js";import{$ as k,Ba as w,C as O,Ga as T,Ib as N,Jb as L,Ka as g,Mb as U,Nb as W,O as S,Ra as c,T as j,Ta as f,Ua as n,Va as o,Wa as E,Xa as I,Ya as b,Za as p,_ as F,cb as s,db as m,eb as C,fb as A,gb as u,hb as h,ib as _,kb as v,lb as y,mb as $,pb as D,xa as a,z as M}from"./chunk-MZDTUXRP.js";var x=class i{constructor(e){this.http=e}apiUrl=`${oe.apiUrl}/jobs`;httpOptions={withCredentials:!0};getJobs(){return this.http.get(this.apiUrl)}getJobById(e){return this.http.get(`${this.apiUrl}/${e}`)}createJob(e){return this.http.post(this.apiUrl,e)}updateJob(e,t){return this.http.put(`${this.apiUrl}/${e}`,t)}deleteJob(e){return this.http.delete(`${this.apiUrl}/${e}`)}getJobsByEmployer(e){return this.http.get(`${this.apiUrl}/employer/${e}`)}searchJobs(e){return this.http.get(`${this.apiUrl}/search?term=${e}`)}getRecommendedJobs(e){return this.http.get(`${this.apiUrl}/recommended/${e}`)}static \u0275fac=function(t){return new(t||i)(j(V))};static \u0275prov=S({token:i,factory:i.\u0275fac,providedIn:"root"})};var J=()=>({standalone:!0}),se=i=>["/post-find-job",i],le=i=>["/jobs",i];function ce(i,e){i&1&&(n(0,"div",18)(1,"p"),s(2,"Loading jobs..."),o()())}function de(i,e){if(i&1&&(n(0,"div",19)(1,"p"),s(2),o()()),i&2){let t=p();a(2),m(t.error)}}function pe(i,e){i&1&&(n(0,"div",18)(1,"p"),s(2,"No jobs found. Try different search terms."),o()())}function me(i,e){if(i&1&&(n(0,"p"),s(1),o()),i&2){let t=p().$implicit;a(),m(t.salary_range)}}function ge(i,e){if(i&1&&(n(0,"span"),s(1),o()),i&2){let t=e.$implicit;a(),m(t)}}function be(i,e){if(i&1&&(n(0,"div",32),g(1,ge,2,1,"span",33),o()),i&2){let t=p().$implicit;a(),c("ngForOf",t.skills)}}function fe(i,e){if(i&1){let t=I();n(0,"div",21)(1,"div",22)(2,"h3"),s(3),o(),n(4,"button",23),b("click",function(){let d=F(t).$implicit,l=p(2);return k(l.toggleSaveJob(d.id))}),s(5),o()(),n(6,"div",24)(7,"p",25),s(8),o(),n(9,"p"),s(10),o(),g(11,me,2,1,"p",26),o(),n(12,"div",27)(13,"p"),s(14),$(15,"slice"),o(),g(16,be,2,1,"div",28),o(),n(17,"div",29)(18,"span",30),s(19),o(),n(20,"a",31),s(21,"View Details"),o(),n(22,"a",31),s(23,"Apply"),o()()()}if(i&2){let t=e.$implicit,r=p(2);a(3),m(t.title),a(),f("saved",r.isSaved(t.id)),a(),C(" ",r.isSaved(t.id)?"Saved":"Save"," "),a(3),m(t.company_name),a(2),m(t.location),a(),c("ngIf",t.salary_range),a(3),A("",D(15,13,t.description,0,200),"",t.description.length>200?"...":"",""),a(2),c("ngIf",t.skills&&t.skills.length>0),a(3),C("Posted: ",r.formatDate(t.created_at),""),a(),c("routerLink",y(17,se,t.id)),a(2),c("routerLink",y(19,le,t.id))}}function ue(i,e){if(i&1&&(n(0,"div",18),g(1,fe,24,21,"div",20),o()),i&2){let t=p();a(),c("ngForOf",t.filteredJobs)}}var ne=class i{constructor(e){this.jobsService=e}searchForm=new q({searchTerm:new K("")});jobs=[];loading=!1;error="";searchActive=!1;savedJobs=[];filters={fullTime:!1,partTime:!1,remote:!1};ngOnInit(){this.loadJobs(),this.searchForm.get("searchTerm")?.valueChanges.pipe(M(500),O()).subscribe(()=>{this.searchForm.get("searchTerm")?.value&&(this.searchActive=!0,this.onSearch())});let e=localStorage.getItem("savedJobs");e&&(this.savedJobs=JSON.parse(e))}loadJobs(){this.loading=!0,this.error="",this.jobsService.getJobs().subscribe({next:e=>{this.jobs=e,this.loading=!1},error:e=>{this.error="Failed to load jobs. Please try again later.",this.loading=!1,console.error("Error loading jobs:",e)}})}onSearch(){let e=this.searchForm.get("searchTerm")?.value;if(!e||e.trim()===""){this.loadJobs(),this.searchActive=!1;return}this.loading=!0,this.error="",this.searchActive=!0,this.jobsService.searchJobs(e).subscribe({next:t=>{this.jobs=t,this.loading=!1},error:t=>{this.error="Failed to search jobs. Please try again later.",this.loading=!1,console.error("Error searching jobs:",t)}})}showAllJobs(){this.searchForm.get("searchTerm")?.setValue(""),this.searchActive=!1,this.loadJobs()}focusSearch(){this.searchActive=!0,setTimeout(()=>{document.getElementById("searchTerm")?.focus()},0)}formatDate(e){let t=new Date(e),d=Math.abs(new Date().getTime()-t.getTime()),l=Math.ceil(d/(1e3*60*60*24));if(l<1)return"Today";if(l===1)return"Yesterday";if(l<7)return`${l} days ago`;if(l<30){let P=Math.floor(l/7);return`${P} ${P===1?"week":"weeks"} ago`}else return t.toLocaleDateString()}toggleSaveJob(e){let t=this.savedJobs.indexOf(e);t>-1?this.savedJobs.splice(t,1):this.savedJobs.push(e),localStorage.setItem("savedJobs",JSON.stringify(this.savedJobs))}isSaved(e){return this.savedJobs.includes(e)}get filteredJobs(){return!this.filters.fullTime&&!this.filters.partTime&&!this.filters.remote?this.jobs:this.jobs.filter(e=>{let t=e.description.toLowerCase();return!!(this.filters.fullTime&&t.includes("full-time")||this.filters.partTime&&t.includes("part-time")||this.filters.remote&&(t.includes("remote")||e.location.toLowerCase().includes("remote")))})}static \u0275fac=function(t){return new(t||i)(w(x))};static \u0275cmp=T({type:i,selectors:[["app-post-find-job"]],decls:35,vars:18,consts:[[1,"container"],[1,"header"],[1,"toggle-buttons"],[3,"click"],[1,"form-group",3,"formGroup"],["for","searchTerm"],["id","searchTerm","type","text","formControlName","searchTerm","placeholder","Search for jobs by title, company, or skills"],["type","button",1,"submit-button",3,"click"],[1,"filters"],[1,"checkbox-group"],["type","checkbox","id","fulltime",3,"ngModelChange","ngModel","ngModelOptions"],["for","fulltime"],["type","checkbox","id","parttime",3,"ngModelChange","ngModel","ngModelOptions"],["for","parttime"],["type","checkbox","id","remote",3,"ngModelChange","ngModel","ngModelOptions"],["for","remote"],["class","job-listings",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"job-listings"],[1,"error-message"],["class","job-card",4,"ngFor","ngForOf"],[1,"job-card"],[1,"job-header"],[1,"save-button",3,"click"],[1,"job-details"],[1,"company"],[4,"ngIf"],[1,"job-description"],["class","job-skills",4,"ngIf"],[1,"job-actions"],[1,"posted-date"],[1,"apply-button",3,"routerLink"],[1,"job-skills"],[4,"ngFor","ngForOf"]],template:function(t,r){t&1&&(n(0,"div",0)(1,"div",1)(2,"h2"),s(3,"Find Your Dream Job"),o(),n(4,"div",2)(5,"button",3),b("click",function(){return r.showAllJobs()}),s(6,"All Jobs"),o(),n(7,"button",3),b("click",function(){return r.focusSearch()}),s(8,"Search"),o()()(),n(9,"form",4)(10,"label",5),s(11,"Search Jobs"),o(),E(12,"input",6),n(13,"button",7),b("click",function(){return r.onSearch()}),s(14,"Search"),o()(),n(15,"div",8)(16,"h4"),s(17,"Filter Results"),o(),n(18,"div",9)(19,"div")(20,"input",10),_("ngModelChange",function(l){return h(r.filters.fullTime,l)||(r.filters.fullTime=l),l}),o(),n(21,"label",11),s(22,"Full-time"),o()(),n(23,"div")(24,"input",12),_("ngModelChange",function(l){return h(r.filters.partTime,l)||(r.filters.partTime=l),l}),o(),n(25,"label",13),s(26,"Part-time"),o()(),n(27,"div")(28,"input",14),_("ngModelChange",function(l){return h(r.filters.remote,l)||(r.filters.remote=l),l}),o(),n(29,"label",15),s(30,"Remote"),o()()()(),g(31,ce,3,0,"div",16)(32,de,3,1,"div",17)(33,pe,3,0,"div",16)(34,ue,2,1,"div",16),o()),t&2&&(a(5),f("active",!r.searchActive),a(2),f("active",r.searchActive),a(2),c("formGroup",r.searchForm),a(11),u("ngModel",r.filters.fullTime),c("ngModelOptions",v(15,J)),a(4),u("ngModel",r.filters.partTime),c("ngModelOptions",v(16,J)),a(4),u("ngModel",r.filters.remote),c("ngModelOptions",v(17,J)),a(3),c("ngIf",r.loading),a(),c("ngIf",r.error),a(),c("ngIf",!r.loading&&r.jobs.length===0&&!r.error),a(),c("ngIf",r.jobs.length>0))},dependencies:[W,N,L,U,ie,X,G,R,H,Y,Z,ee,te,Q,z,B],styles:[".container[_ngcontent-%COMP%]{padding:20px;border-radius:8px;background-color:#fff;font-family:Arial,sans-serif}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.toggle-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;background-color:#f0f0f0;border:none;cursor:pointer;border-radius:4px;margin-left:5px}.toggle-buttons[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:#d6a4a4;color:#fff}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:500}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.submit-button[_ngcontent-%COMP%]{background-color:#d6a4a4;color:#fff;padding:10px 20px;border:none;border-radius:4px;cursor:pointer;margin-top:10px;font-weight:700}.submit-button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.secondary-button[_ngcontent-%COMP%]{background-color:#f0f0f0;color:#333;padding:10px 20px;border:1px solid #ccc;border-radius:4px;cursor:pointer;margin-right:10px}.filters[_ngcontent-%COMP%]{margin-top:15px;margin-bottom:15px}.checkbox-group[_ngcontent-%COMP%]{display:flex;gap:15px;align-items:center}.checkbox-group[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto;margin-right:5px}.job-listings[_ngcontent-%COMP%]{margin-top:20px;display:flex;flex-direction:column;gap:20px}.job-card[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:8px;padding:15px;box-shadow:0 2px 4px #0000000d;transition:all .3s ease}.job-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px #0000001a;transform:translateY(-2px)}.job-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.job-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#333}.save-button[_ngcontent-%COMP%]{background-color:transparent;border:1px solid #d6a4a4;color:#d6a4a4;padding:5px 10px;border-radius:4px;cursor:pointer;transition:all .2s ease}.save-button.saved[_ngcontent-%COMP%]{background-color:#d6a4a4;color:#fff}.job-details[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:10px;color:#666}.job-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}.company[_ngcontent-%COMP%]{font-weight:700}.job-description[_ngcontent-%COMP%]{font-size:14px;line-height:1.4;margin-bottom:15px;color:#555}.job-skills[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:5px;margin-top:10px}.job-skills[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:#f0f0f0;border-radius:20px;padding:4px 10px;font-size:12px;color:#666}.job-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.posted-date[_ngcontent-%COMP%]{font-size:12px;color:#888}.apply-button[_ngcontent-%COMP%]{background-color:#d6a4a4;color:#fff;padding:8px 16px;border:none;border-radius:4px;cursor:pointer;font-weight:700;text-decoration:none}.error-message[_ngcontent-%COMP%]{color:#d32f2f;font-size:12px;margin-top:5px}"]})};export{ne as PostFindJobComponent};
